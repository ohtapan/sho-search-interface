{"mappings":"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","sources":["node_modules/hyperapp/index.js","node_modules/hyperapp-fx/src/utils.js","node_modules/hyperapp-fx/src/fx/Http.js","src/index.js"],"sourcesContent":["var SSR_NODE = 1\nvar TEXT_NODE = 3\nvar EMPTY_OBJ = {}\nvar EMPTY_ARR = []\nvar SVG_NS = \"http://www.w3.org/2000/svg\"\n\nvar id = (a) => a\nvar map = EMPTY_ARR.map\nvar isArray = Array.isArray\nvar enqueue =\n  typeof requestAnimationFrame !== \"undefined\"\n    ? requestAnimationFrame\n    : setTimeout\n\nvar createClass = (obj) => {\n  var out = \"\"\n\n  if (typeof obj === \"string\") return obj\n\n  if (isArray(obj)) {\n    for (var k = 0, tmp; k < obj.length; k++) {\n      if ((tmp = createClass(obj[k]))) {\n        out += (out && \" \") + tmp\n      }\n    }\n  } else {\n    for (var k in obj) {\n      if (obj[k]) out += (out && \" \") + k\n    }\n  }\n\n  return out\n}\n\nvar shouldRestart = (a, b) => {\n  for (var k in { ...a, ...b }) {\n    if (typeof (isArray(a[k]) ? a[k][0] : a[k]) === \"function\") {\n      b[k] = a[k]\n    } else if (a[k] !== b[k]) return true\n  }\n}\n\nvar patchSubs = (oldSubs, newSubs = EMPTY_ARR, dispatch) => {\n  for (\n    var subs = [], i = 0, oldSub, newSub;\n    i < oldSubs.length || i < newSubs.length;\n    i++\n  ) {\n    oldSub = oldSubs[i]\n    newSub = newSubs[i]\n\n    subs.push(\n      newSub && newSub !== true\n        ? !oldSub ||\n          newSub[0] !== oldSub[0] ||\n          shouldRestart(newSub[1], oldSub[1])\n          ? [\n              newSub[0],\n              newSub[1],\n              (oldSub && oldSub[2](), newSub[0](dispatch, newSub[1])),\n            ]\n          : oldSub\n        : oldSub && oldSub[2]()\n    )\n  }\n  return subs\n}\n\nvar getKey = (vdom) => (vdom == null ? vdom : vdom.key)\n\nvar patchProperty = (node, key, oldValue, newValue, listener, isSvg) => {\n  if (key === \"key\") {\n  } else if (key === \"style\") {\n    for (var k in { ...oldValue, ...newValue }) {\n      oldValue = newValue == null || newValue[k] == null ? \"\" : newValue[k]\n      if (k[0] === \"-\") {\n        node[key].setProperty(k, oldValue)\n      } else {\n        node[key][k] = oldValue\n      }\n    }\n  } else if (key[0] === \"o\" && key[1] === \"n\") {\n    if (\n      !((node.events || (node.events = {}))[(key = key.slice(2))] = newValue)\n    ) {\n      node.removeEventListener(key, listener)\n    } else if (!oldValue) {\n      node.addEventListener(key, listener)\n    }\n  } else if (!isSvg && key !== \"list\" && key !== \"form\" && key in node) {\n    node[key] = newValue == null ? \"\" : newValue\n  } else if (\n    newValue == null ||\n    newValue === false ||\n    (key === \"class\" && !(newValue = createClass(newValue)))\n  ) {\n    node.removeAttribute(key)\n  } else {\n    node.setAttribute(key, newValue)\n  }\n}\n\nvar createNode = (vdom, listener, isSvg) => {\n  var props = vdom.props\n  var node =\n    vdom.type === TEXT_NODE\n      ? document.createTextNode(vdom.tag)\n      : (isSvg = isSvg || vdom.tag === \"svg\")\n      ? document.createElementNS(SVG_NS, vdom.tag, { is: props.is })\n      : document.createElement(vdom.tag, { is: props.is })\n\n  for (var k in props) {\n    patchProperty(node, k, null, props[k], listener, isSvg)\n  }\n\n  for (var i = 0; i < vdom.children.length; i++) {\n    node.appendChild(\n      createNode(\n        (vdom.children[i] = maybeVNode(vdom.children[i])),\n        listener,\n        isSvg\n      )\n    )\n  }\n\n  return (vdom.node = node)\n}\n\nvar patch = (parent, node, oldVNode, newVNode, listener, isSvg) => {\n  if (oldVNode === newVNode) {\n  } else if (\n    oldVNode != null &&\n    oldVNode.type === TEXT_NODE &&\n    newVNode.type === TEXT_NODE\n  ) {\n    if (oldVNode.tag !== newVNode.tag) node.nodeValue = newVNode.tag\n  } else if (oldVNode == null || oldVNode.tag !== newVNode.tag) {\n    node = parent.insertBefore(\n      createNode((newVNode = maybeVNode(newVNode)), listener, isSvg),\n      node\n    )\n    if (oldVNode != null) {\n      parent.removeChild(oldVNode.node)\n    }\n  } else {\n    var tmpVKid\n    var oldVKid\n\n    var oldKey\n    var newKey\n\n    var oldProps = oldVNode.props\n    var newProps = newVNode.props\n\n    var oldVKids = oldVNode.children\n    var newVKids = newVNode.children\n\n    var oldHead = 0\n    var newHead = 0\n    var oldTail = oldVKids.length - 1\n    var newTail = newVKids.length - 1\n\n    isSvg = isSvg || newVNode.tag === \"svg\"\n\n    for (var i in { ...oldProps, ...newProps }) {\n      if (\n        (i === \"value\" || i === \"selected\" || i === \"checked\"\n          ? node[i]\n          : oldProps[i]) !== newProps[i]\n      ) {\n        patchProperty(node, i, oldProps[i], newProps[i], listener, isSvg)\n      }\n    }\n\n    while (newHead <= newTail && oldHead <= oldTail) {\n      if (\n        (oldKey = getKey(oldVKids[oldHead])) == null ||\n        oldKey !== getKey(newVKids[newHead])\n      ) {\n        break\n      }\n\n      patch(\n        node,\n        oldVKids[oldHead].node,\n        oldVKids[oldHead],\n        (newVKids[newHead] = maybeVNode(\n          newVKids[newHead++],\n          oldVKids[oldHead++]\n        )),\n        listener,\n        isSvg\n      )\n    }\n\n    while (newHead <= newTail && oldHead <= oldTail) {\n      if (\n        (oldKey = getKey(oldVKids[oldTail])) == null ||\n        oldKey !== getKey(newVKids[newTail])\n      ) {\n        break\n      }\n\n      patch(\n        node,\n        oldVKids[oldTail].node,\n        oldVKids[oldTail],\n        (newVKids[newTail] = maybeVNode(\n          newVKids[newTail--],\n          oldVKids[oldTail--]\n        )),\n        listener,\n        isSvg\n      )\n    }\n\n    if (oldHead > oldTail) {\n      while (newHead <= newTail) {\n        node.insertBefore(\n          createNode(\n            (newVKids[newHead] = maybeVNode(newVKids[newHead++])),\n            listener,\n            isSvg\n          ),\n          (oldVKid = oldVKids[oldHead]) && oldVKid.node\n        )\n      }\n    } else if (newHead > newTail) {\n      while (oldHead <= oldTail) {\n        node.removeChild(oldVKids[oldHead++].node)\n      }\n    } else {\n      for (var keyed = {}, newKeyed = {}, i = oldHead; i <= oldTail; i++) {\n        if ((oldKey = oldVKids[i].key) != null) {\n          keyed[oldKey] = oldVKids[i]\n        }\n      }\n\n      while (newHead <= newTail) {\n        oldKey = getKey((oldVKid = oldVKids[oldHead]))\n        newKey = getKey(\n          (newVKids[newHead] = maybeVNode(newVKids[newHead], oldVKid))\n        )\n\n        if (\n          newKeyed[oldKey] ||\n          (newKey != null && newKey === getKey(oldVKids[oldHead + 1]))\n        ) {\n          if (oldKey == null) {\n            node.removeChild(oldVKid.node)\n          }\n          oldHead++\n          continue\n        }\n\n        if (newKey == null || oldVNode.type === SSR_NODE) {\n          if (oldKey == null) {\n            patch(\n              node,\n              oldVKid && oldVKid.node,\n              oldVKid,\n              newVKids[newHead],\n              listener,\n              isSvg\n            )\n            newHead++\n          }\n          oldHead++\n        } else {\n          if (oldKey === newKey) {\n            patch(\n              node,\n              oldVKid.node,\n              oldVKid,\n              newVKids[newHead],\n              listener,\n              isSvg\n            )\n            newKeyed[newKey] = true\n            oldHead++\n          } else {\n            if ((tmpVKid = keyed[newKey]) != null) {\n              patch(\n                node,\n                node.insertBefore(tmpVKid.node, oldVKid && oldVKid.node),\n                tmpVKid,\n                newVKids[newHead],\n                listener,\n                isSvg\n              )\n              newKeyed[newKey] = true\n            } else {\n              patch(\n                node,\n                oldVKid && oldVKid.node,\n                null,\n                newVKids[newHead],\n                listener,\n                isSvg\n              )\n            }\n          }\n          newHead++\n        }\n      }\n\n      while (oldHead <= oldTail) {\n        if (getKey((oldVKid = oldVKids[oldHead++])) == null) {\n          node.removeChild(oldVKid.node)\n        }\n      }\n\n      for (var i in keyed) {\n        if (newKeyed[i] == null) {\n          node.removeChild(keyed[i].node)\n        }\n      }\n    }\n  }\n\n  return (newVNode.node = node)\n}\n\nvar propsChanged = (a, b) => {\n  for (var k in a) if (a[k] !== b[k]) return true\n  for (var k in b) if (a[k] !== b[k]) return true\n}\n\nvar maybeVNode = (newVNode, oldVNode) =>\n  newVNode !== true && newVNode !== false && newVNode\n    ? typeof newVNode.tag === \"function\"\n      ? ((!oldVNode ||\n          oldVNode.memo == null ||\n          propsChanged(oldVNode.memo, newVNode.memo)) &&\n          ((oldVNode = newVNode.tag(newVNode.memo)).memo = newVNode.memo),\n        oldVNode)\n      : newVNode\n    : text(\"\")\n\nvar recycleNode = (node) =>\n  node.nodeType === TEXT_NODE\n    ? text(node.nodeValue, node)\n    : createVNode(\n        node.nodeName.toLowerCase(),\n        EMPTY_OBJ,\n        map.call(node.childNodes, recycleNode),\n        SSR_NODE,\n        node\n      )\n\nvar createVNode = (tag, props, children, type, node) => ({\n  tag,\n  props,\n  key: props.key,\n  children,\n  type,\n  node,\n})\n\nexport var memo = (tag, memo) => ({ tag, memo })\n\nexport var text = (value, node) =>\n  createVNode(value, EMPTY_OBJ, EMPTY_ARR, TEXT_NODE, node)\n\nexport var h = (tag, props, children = EMPTY_ARR) =>\n  createVNode(tag, props, isArray(children) ? children : [children])\n\nexport var app = ({\n  node,\n  view,\n  subscriptions,\n  dispatch = id,\n  init = EMPTY_OBJ,\n}) => {\n  var vdom = node && recycleNode(node)\n  var subs = []\n  var state\n  var busy\n\n  var update = (newState) => {\n    if (state !== newState) {\n      if ((state = newState) == null) dispatch = subscriptions = render = id\n      if (subscriptions) subs = patchSubs(subs, subscriptions(state), dispatch)\n      if (view && !busy) enqueue(render, (busy = true))\n    }\n  }\n\n  var render = () =>\n    (node = patch(\n      node.parentNode,\n      node,\n      vdom,\n      (vdom = view(state)),\n      listener,\n      (busy = false)\n    ))\n\n  var listener = function (event) {\n    dispatch(this.events[event.type], event)\n  }\n\n  return (\n    (dispatch = dispatch((action, props) =>\n      typeof action === \"function\"\n        ? dispatch(action(state, props))\n        : isArray(action)\n        ? typeof action[0] === \"function\"\n          ? dispatch(action[0], action[1])\n          : action\n              .slice(1)\n              .map(\n                (fx) => fx && fx !== true && fx[0](dispatch, fx[1]),\n                update(action[0])\n              )\n        : update(action)\n    ))(init),\n    dispatch\n  )\n}\n","export function assign(source, assignments) {\n  var result = {},\n    i\n  for (i in source) result[i] = source[i]\n  for (i in assignments) result[i] = assignments[i]\n  return result\n}\n\nexport function makeRemoveListener(attachTo, dispatch, action, eventName) {\n  var handler = dispatch.bind(null, action)\n  attachTo.addEventListener(eventName, handler)\n  return function() {\n    attachTo.removeEventListener(eventName, handler)\n  }\n}\n\nexport function makeDispatchTime(dispatch, props) {\n  return function() {\n    dispatch(props.action, props.asDate ? new Date() : performance.now())\n  }\n}\n\nvar webSocketConnections = {}\n\nexport function getOpenWebSocket(props) {\n  var connection = webSocketConnections[props.url]\n  if (!connection) {\n    connection = {\n      socket: new WebSocket(props.url, props.protocols),\n      listeners: []\n    }\n    webSocketConnections[props.url] = connection\n  }\n  return connection\n}\n\nexport function closeWebSocket(props) {\n  var connection = getOpenWebSocket(props)\n  // FIXME: handle close on opening\n  connection.socket.close()\n  delete webSocketConnections[props.url]\n}\n","import { assign } from \"../utils.js\"\n\nfunction httpEffect(dispatch, props) {\n  fetch(props.url, props.options)\n    .then(function(response) {\n      if (!response.ok) {\n        throw response\n      }\n      return response\n    })\n    .then(function(response) {\n      return response[props.response]()\n    })\n    .then(function(result) {\n      dispatch(props.action, result)\n    })\n    .catch(function(error) {\n      dispatch(props.error, error)\n    })\n}\n\n/**\n * Describes an effect that will send an HTTP request using [`fetch`](https://developer.mozilla.org/en-US/docs/Web/API/Window/fetch) and then call an action with the response. If you are using a browser from the Proterozoic Eon like Internet Explorer you will want one of the [available](https://github.com/developit/unfetch) `fetch` [polyfills](https://github.com/github/fetch).\n *\n * @memberof module:fx\n * @param {object} props\n * @param {string} props.url - URL for sending HTTP request\n * @param {object} props.options - same [options as `fetch`](https://developer.mozilla.org/en-US/docs/Web/API/Window/fetch#Parameters)\n * @param {string} props.response - Specify which method to use on the response body, defaults to `\"json\"`, other [supported methods](https://developer.mozilla.org/en-US/docs/Web/API/Response#Methods) include `\"text\"`\n * @param {*} props.action - Action to call with the results of a successful HTTP response\n * @param {*} props.error - Action to call if there is a problem making the request or a not-ok HTTP response, defaults to the same action defined for success\n * @example\n * import { Http } from \"hyperapp-fx\"\n *\n * const Login = state => [\n *   state,\n *   Http({\n *     url: \"/login\",\n *     options: {\n *       method: \"POST\",\n *       body: form\n *     },\n *     action(state, loginResponse) {\n *       // loginResponse will have the JSON-decoded response from POSTing to /login\n *     },\n *     error(state, error) {\n *       // please handle your errors...\n *     }\n *   })\n * ]\n */\nexport function Http(props) {\n  return [\n    httpEffect,\n    assign(\n      {\n        options: {},\n        response: \"json\",\n        error: props.action\n      },\n      props\n    )\n  ]\n}\n","import { app, h, text } from \"hyperapp\"\r\nimport { Http } from \"hyperapp-fx\"\r\n\r\n// --- ACTIONS ---\r\nconst preventDefault = (action) => (state, event) => [\r\n  state,\r\n  [(dispatch) => (event.preventDefault(), dispatch(action))],\r\n]\r\n\r\nconst NewValue = (state, value) => ({ ...state, value })\r\nconst withPayload = (filter) => (_, payload) => filter(payload)\r\nconst targetValue = (action) => withPayload((e) => [action, e.target.value])\r\n\r\nconst FetchSearch = state => [\r\n  {...state, fetching: true},\r\n  Http({\r\n    url: \"https://y3vglivbe6.execute-api.ap-northeast-1.amazonaws.com/Prod/search\",\r\n    options: {\r\n      method: \"POST\",\r\n      body: JSON.stringify({\r\n        query: state.value\r\n      })\r\n    },\r\n    action: (state, content) => ({ ...state, fetching: false, sholist: content, error:false}),\r\n    error: (state, error) => ({ ...state, fetching: false, error: error}),\r\n  }),\r\n]\r\n// --- VIEW CONPONENTS ---\r\n\r\nconst DetailCard = props =>\r\nh(\"div\", {class:\"card mb-4\"}, [\r\n  h(\"div\", {class:\"card-header\"}, text(\"詳細\")),\r\n  h(\"ul\", {class:\"list-group list-group-flush\"}, [\r\n    h(\"li\", {class:\"list-group-item\"}, [\r\n      h(\"div\", {class:\"row\"}, [\r\n        h(\"b\", {class:\"col-sm-auto\"}, text(\"症状：　　\")),\r\n        h(\"div\", {class:\"col-sm\"},text(props.symptoms)),\r\n      ]),\r\n    ]),\r\n    h(\"li\", {class:\"list-group-item\"}, [\r\n      h(\"div\", {class:\"row\"}, [\r\n        h(\"b\", {class:\"col-sm-auto\"}, text(\"部位：　　\")),\r\n        h(\"div\", {class:\"col-sm\"},text(props.region)),\r\n      ]),\r\n    ]),\r\n    h(\"li\", {class:\"list-group-item\"}, [\r\n      h(\"div\", {class:\"row\"}, [\r\n        h(\"b\", {class:\"col-sm-auto\"}, text(\"主な薬物：\")),\r\n        h(\"div\", {class:\"col-sm\"},text(props.crude_drags)),\r\n      ]),\r\n    ]),\r\n    h(\"li\", {class:\"list-group-item\"}, [\r\n      h(\"div\", {class:\"row\"}, [\r\n        h(\"b\", {class:\"col-sm-auto\"}, text(\"方剤例：　\")),\r\n        h(\"div\", {class:\"col-sm\"},text(props.prescriptions)),\r\n      ]),\r\n    ]),\r\n    h(\"li\", {class:\"list-group-item\"}, [\r\n      h(\"div\", {class:\"row\"}, [\r\n        h(\"b\", {class:\"col-sm-auto\"}, text(\"治療法：　\")),\r\n        h(\"div\", {class:\"col-sm\"},text(props.treatment)),\r\n      ]),\r\n    ]),\r\n  ]),\r\n])\r\n\r\n\r\nconst ShoItem = props => \r\n  h(\"div\", {class:\"card mt-3\"}, [\r\n    h('div', {class:\"card-body\"}, [\r\n      h(\"h2\", {class:\"card-title\"}, text(props.name)),\r\n      h(\"p\", {class:\"card-text\"}, text(props.description)),\r\n      DetailCard(props),\r\n        h(\"footer\", {class: \"blockquote-footer mb-0\"}, text(\"出典： \" + props.references))\r\n    ]),\r\n  ])\r\n\r\nconst SearchForm = props =>\r\nh(\"div\", {class:\"sticky-top\"}, [\r\n  h(\"form\", {onsubmit: preventDefault(FetchSearch), class:\"row row-cols-2 g-1 align-items-center\"}, [\r\n    h(\"div\", {class:\"col-sm\"}, [\r\n      h(\"div\", {class:\"input-group flex-nowrap\"}, [\r\n        h(\"span\", {class:\"input-group-text\"}, [\r\n          h(\"i\",{class:\"fas fa-search\"})\r\n        ]),\r\n        h(\"input\", {\r\n            class:\"form-control\",\r\n            oninput: targetValue(NewValue),\r\n            type: \"search\", \r\n            placeholder: \"症状を入力...\",\r\n            autofocus: true,\r\n            required: true,\r\n        })\r\n      ]),\r\n    ]),\r\n    h(\"div\", {class:\"col-sm-auto\"}, [\r\n      h(\"button\", {\r\n        class:\"btn btn-primary\",\r\n        type: \"submit\",\r\n        disabled:props.fetching,\r\n      }, [\r\n        props.fetching ? \r\n        h(\"div\", {class:\"spinner-border spinner-border-sm\", role:\"status\"}):\r\n        h(\"i\",{class:\"fas fa-search\"})\r\n      ])\r\n    ])\r\n  ])\r\n])\r\n\r\nconst ShoList = props =>\r\n  h('div', {}, [\r\n    ...props.sholist.map(sho => JSON.parse(JSON.stringify(sho))).map( sho => ShoItem({\r\n      name: sho.name,\r\n      similarity: sho.similarity,\r\n      description: sho.description,\r\n      symptoms: sho.symptoms,\r\n      region: sho.region,\r\n      crude_drags: sho.crude_drags,\r\n      prescriptions: sho.prescriptions,\r\n      treatment: sho.treatment,\r\n      references: sho.references,\r\n      q: null,\r\n      error: null,\r\n    })),\r\n  ])\r\n\r\nconst view = state => \r\nh(\"div\", {class:\"container\"}, [\r\n  h(\"div\", {}, [\r\n    h(\"h1\", {class:\"m-3\"}, text(\"証情報検索システム\"))\r\n  ]),\r\n  SearchForm(state),\r\n  state.fetching ?\r\n  h(\"div\", {class:\"d-flex justify-content-center\"}, [\r\n    h(\"div\", {class:\"spinner-border m-5\", role:\"status\"}) \r\n  ]): \r\n    state.error ? \r\n      h(\"h1\", {}, text(state.error)) : \r\n      state.sholist && ShoList(state)\r\n])\r\n\r\n// --- APP COMPONENTS ---\r\n\r\napp({\r\n  init: {value:\"\",sholist: [],fetching:false},\r\n  view,\r\n  node: document.getElementById(\"app\"),\r\n})"],"names":["$cb2c88786b0ecabb$var$EMPTY_OBJ","$cb2c88786b0ecabb$var$EMPTY_ARR","$cb2c88786b0ecabb$var$id","a","$cb2c88786b0ecabb$var$map","map","$cb2c88786b0ecabb$var$isArray","Array","isArray","$cb2c88786b0ecabb$var$enqueue","requestAnimationFrame","setTimeout","$cb2c88786b0ecabb$var$createClass","obj","out","tmp","k","length","$cb2c88786b0ecabb$var$shouldRestart","b","$cb2c88786b0ecabb$var$getKey","vdom","key","$cb2c88786b0ecabb$var$patchProperty","node","oldValue","newValue","listener","isSvg","setProperty","events","slice","addEventListener","removeEventListener","removeAttribute","setAttribute","$cb2c88786b0ecabb$var$createNode","props","type","document","createTextNode","tag","createElementNS","is","createElement","i","children","appendChild","$cb2c88786b0ecabb$var$maybeVNode","$cb2c88786b0ecabb$var$patch","parent","oldVNode","newVNode","nodeValue","insertBefore","removeChild","tmpVKid","oldVKid","oldKey","newKey","oldProps","newProps","oldVKids","newVKids","oldHead","newHead","oldTail","newTail","keyed","newKeyed","memo","$cb2c88786b0ecabb$var$propsChanged","$cb2c88786b0ecabb$export$e275ef786d770132","$cb2c88786b0ecabb$var$recycleNode","nodeType","$cb2c88786b0ecabb$var$createVNode","nodeName","toLowerCase","call","childNodes","value","$cb2c88786b0ecabb$export$be8f9244aa91bbc4","$4b7dd1630a0fd43e$export$f3c88f5a058bec38","source","assignments","result","$0a8494a8b2cb64ba$var$httpEffect","dispatch","fetch","url","options","then","response","ok","action","catch","error","$2ff1f906cd8af8d3$var$NewValue","state","$2ff1f906cd8af8d3$var$targetValue","$2ff1f906cd8af8d3$var$withPayload","filter","e","target","_","payload","$2ff1f906cd8af8d3$var$FetchSearch","fetching","method","body","JSON","stringify","query","state1","content","sholist","$2ff1f906cd8af8d3$var$DetailCard","class","symptoms","region","crude_drags","prescriptions","treatment","$2ff1f906cd8af8d3$var$ShoList","sho","parse","name","description","references","$2ff1f906cd8af8d3$var$ShoItem","similarity","q","view","subscriptions","init","busy","subs","update","newState","render","oldSubs","newSubs","oldSub","newSub","push","$cb2c88786b0ecabb$var$patchSubs","parentNode","event","this","fx","$cb2c88786b0ecabb$export$2900dcdb0f15edcb","onsubmit","preventDefault","oninput","placeholder","autofocus","required","disabled","role","getElementById"],"version":3,"file":"index.a5f07c6e.js.map"}